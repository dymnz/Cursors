<!DOCTYPE html>

<html lang="en">

	<head>
		<meta name="viewport" content="initial-scale=1.0001, minimum-scale=1.0001, maximum-scale=1.0001, user-scalable=no"/>

		<title>A multiplayer game built using HTML5 canvas and WebSockets</title>
		<meta charset="utf-8">
		
		<link rel="stylesheet" href="style/reset.css">
		<link rel="stylesheet" href="style/game.css">
	</head>
	
	<body>
		<div id="welcome">
			<div id="form_content">
				<table>
				<tr>	
					<td>Name:</td>
					<td><input type="text" id="name" onkeydown = "if (event.keyCode == 13) document.getElementById('button').click();"></td>
				</tr>
				<tr>
					<td>Team ID:</td>
					<td><input type="text" id="team_id" onkeydown = "if (event.keyCode == 13) document.getElementById('button').click();"></td>
				</tr>	
				</table>
				<input type="button" id="button" value="Enter!" onClick="submit();">
			</div>
			<p id="inform"></p>
		</div>

		<div class="myCanvas">
			<canvas id="gameCanvas"></canvas>	
		</div>
		
		<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
		<script src="js/requestAnimationFrame.js"></script>
		<script src="js/Keys.js"></script>
		<script src="js/Player.js"></script>
		<script src="js/game.js"></script>
		<script src="js/Map.js"></script>
		<script>
			// Initialise the game

			document.getElementById("team_id").value = Math.floor(Math.random() * (99999 - 10000 + 1)) + 10000;

			function submit() {
			var name=document.getElementById("name").value;
			var teamId=document.getElementById("team_id").value;
			if(isNaN(teamId) || teamId.replace(/^\s+|\s+$/g, '').length != 5)
				document.getElementById('inform').innerHTML = 'Team ID is a 5-digit number';
			else if (name.replace(/^\s+|\s+$/g, '').length != 0)
			{
				document.getElementById('welcome').remove();
				init(name, teamId);
				animate();
		         	}
		         	else
		         		document.getElementById('inform').innerHTML = 'Name cannot be empty';
		   	}
		</script>
	</body>
</html>